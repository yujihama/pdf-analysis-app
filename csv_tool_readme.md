# CSV処理ツール

このツールは、CSVファイルの各行を個別のチャンクとして処理し、GPT-4oを使って回答を生成するStreamlitアプリケーションです。

## 機能

- CSVファイルのアップロード（1カラム形式）
- 各行（チャンク）に対して個別にGPT-4oで回答を生成
- 生成された回答をCSVファイルとしてダウンロード
- オプションで全チャンクの回答を統合した総合分析を生成

## 使い方

1. `streamlit run csv_process.py` コマンドでアプリを起動します
2. Webブラウザが自動的に開き、アプリのインターフェースが表示されます
3. 左側の「CSVファイルをアップロード」ボタンからCSVファイルを選択します
   - **注意**: CSVファイルは1カラムのみの形式を想定しています
   - 複数カラムのCSVファイルをアップロードした場合は、1カラム目のみが使用されます
4. ファイルがアップロードされると、プレビューが表示されます
5. 「各チャンク処理用プロンプト」に、各行のデータを処理するためのプロンプトを入力します
   - デフォルトのプロンプトが設定されていますが、必要に応じて変更できます
6. 必要に応じて「回答統合用プロンプト」も入力します（オプション）
7. 「処理開始」ボタンをクリックすると、処理が開始されます
8. 処理が完了すると、結果が表示され、CSVファイルとしてダウンロードできます
9. 統合プロンプトを入力した場合は、「回答を統合」ボタンが表示されます
10. 「回答を統合」ボタンをクリックすると、すべての回答を統合した総合分析が生成されます

## サンプルCSVファイル

以下のサンプルCSVファイルを用意しています：

1. `sample_text_chunks.csv` - 技術や概念に関する説明文のチャンク（1カラム形式）
2. `sample_literature_excerpts.csv` - 文学作品などの抜粋（1カラム形式）

これらのファイルを使って機能をテストできます。

### CSVファイル形式について

このツールは1カラム形式のCSVファイルを処理します。CSVファイルの例：

```
text
"ここに1つ目のテキストチャンクが入ります。これは1行目のデータです。"
"ここに2つ目のテキストチャンクが入ります。これは2行目のデータです。"
"ここに3つ目のテキストチャンクが入ります。これは3行目のデータです。"
```

カラム名（ヘッダー）は任意ですが、各行のテキストはダブルクォーテーション（"）で囲むことをお勧めします。特に、改行やカンマを含むテキストの場合は必須です。

自分のCSVファイルを作成する場合は、この形式に従ってください。

## プロンプト例

### 各チャンク処理用プロンプト例

```
以下の引用文書の情報を分析して要約してください。重要なポイントを箇条書きで5つ挙げてください。
```

```
この製品レビューを分析し、主な長所と短所を抽出してください。また、顧客満足度を評価し、改善点があれば提案してください。
```

```
このニュース記事の要点をまとめ、業界への影響と今後の展望について分析してください。
```

### 回答統合用プロンプト例

```
以下の回答を統合して、共通する重要なポイントと特徴的な違いを分析してください。全体的な傾向と特筆すべき点を簡潔にまとめてください。
```

```
これらの製品レビュー分析結果を統合し、全製品カテゴリーを横断した消費者トレンドや満足度の傾向を抽出してください。特に注目すべき点と改善すべき共通の課題を挙げてください。
```

## 注意事項

- 処理には時間がかかる場合があります（特に大きなCSVファイルの場合）
- OpenAI APIキーが必要です（環境変数またはAzure OpenAI設定）
- CSVファイルの各行は独立したチャンクとして処理されます
- 統合回答の生成には、すべてのチャンク処理が完了している必要があります 